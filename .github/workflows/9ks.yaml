name: KinD Cluster
on: [push]

jobs:
  kind:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install Dependencies
      run: |
        sudo apt-get install -y curl
        curl -Lo kind https://kind.sigs.k8s.io/dl/v0.11.1/kind-linux-amd64
        chmod +x kind
        sudo mv kind /usr/local/bin/
    - name: Create KinD Cluster
      run: |
        kind create cluster --image=kindest/node:v1.21.1 --name=kind-cluster
        kubectl cluster-info --context kind-kind-cluster
        kubectl get nodes
name: Minikube Cluster
on: [push]

jobs:
  minikube:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install Dependencies
      run: |
        sudo apt-get install -y curl
        sudo apt-get install -y conntrack
        curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
        chmod +x minikube
        sudo mv minikube /usr/local/bin/
    - name: Create Minikube Cluster
      run: |
        sudo minikube start --driver=none --kubernetes-version=v1.21.1
        sudo kubectl cluster-info
        sudo kubectl get nodes